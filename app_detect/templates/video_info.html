{% extends 'layout.html' %}
{% block content %}

<br>
<p>Информация по файлу: {{ results.file }}</p>
<p>Входящих: {{ results.counter_in }}, Выходящих: {{ results.counter_out }}</p>

<br>{{ results }}

  <table id="data" class="table table-striped">
    <thead>
      <tr>
        <th>Начальный кадр</th>
        <th>Конечный кадр</th>
        <th>Нарушение</th>
      </tr>
    </thead>
    <tbody>
      {% for dev in results.deviations %}
        <tr>
          <td>{{ dev.start_frame }}, {{ dev.start_time }} мс</td>
          <td>{{ dev.end_frame }}</td>
          <td>{{ dev.status_id }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
<select id="timeSelect">
    <option value="0">В начало файла</option>
{% for dev in results.deviations %}
    <option value="{{ dev.start_time }}">
        Выбрать {{ dev.start_time }}сек, [{{ dev.start_frame }}-{{ dev.end_frame }}] кадр,
        {{ dev.status_id }}
    </option>
{% endfor %}
</select>
<br/>
<video controls id="myVideo">
  <source src="{{ url_for('static', filename=video_path) }}" type="video/mp4">
</video>
<script>
    var video = document.getElementById("myVideo");
        var timeSelect = document.getElementById("timeSelect");
        timeSelect.addEventListener("change", function() {
          var startTime = parseInt(timeSelect.value);
          video.currentTime = startTime;
        });

</script>
