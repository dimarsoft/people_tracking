{% extends 'layout.html' %}
{% block content %}
<!--
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round|Open+Sans">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
-->

<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<!--
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
-->
<style>
table.table td a {
    cursor: pointer;
    display: inline-block;
    margin: 0 5px;
    min-width: 24px;
}
table.table td a.add {
    color: #27C46B;
}
table.table td a.edit {
    color: #FFC107;
}
table.table td a.view {
    color: #27C46B;
}

table.table td a.delete {
    color: #E34724;
}
table.table td i {
    font-size: 19px;
}
</style>
<div class="container">
    <div class="panel-heading">
        <h2 class="h4">Видео файлы на сервере.</h2>
    </div>

    <div class="col-xs-8 col-xs-offset-2 well">
        <table class="table table-scroll table-striped" style="width:100%; border:2;">
            <thead class="thead-dark">
                <tr>
                    <th class="col-xs-2">ИД видео</th>
                    <th class="col-xs-2" >email</th>
                    <th class="col-xs-2" >url</th>
                    <th class="col-xs-2" >Действия</th>
                </tr>
            </thead>
            <tbody id="table-body" style="height: 10px !important; overflow: scroll; ">
            </tbody>
        </table>
    </div>
</div>
    <script>
        fetch('video_processing_list/')
          .then(response => response.json())
          .then(data => {
            const tableBody = document.getElementById('table-body');
            data.forEach(item => {
              const row = document.createElement('tr');

              const idCell = document.createElement('td');
              const emailCell = document.createElement('td');
              const url_detailCell = document.createElement('td');
              const action_Cell = document.createElement('td');

              idCell.textContent = item.id;
              emailCell.textContent = item.email;
              url_detailCell.textContent = item.url_detail;

              //action_Cell.content = '<a class="delete" title="Delete" data-toggle="tooltip"><i class="material-icons">&#xE872;</i></a>';

              var view_link = document.createElement("a");
              view_link.classList.add("view");  // Add the "delete" class to the link
              view_link.title = "Открыть";  // Set the title attribute
              view_link.dataset.toggle = "tooltip";  // Set the data-toggle attribute

              var view_icon = document.createElement("i");
              view_icon.classList.add("material-icons");
              view_icon.innerHTML = "&#xe89e;";  // Set the icon content

              view_link.appendChild(view_icon);

              // По нажатию запрос на просмотр файла
              view_link.addEventListener("click", function(event) {
                console.log("View clicked: " + item.id);
                // Add your desired functionality here
              });


              var del_link = document.createElement("a");
              del_link.classList.add("delete");  // Add the "delete" class to the link
              del_link.title = "Удалить";  // Set the title attribute
              del_link.dataset.toggle = "tooltip";  // Set the data-toggle attribute

              var del_icon = document.createElement("i");
              del_icon.classList.add("material-icons");
              del_icon.innerHTML = "&#xE872;";  // Set the icon content

              del_link.appendChild(del_icon);
              // По нажатию запрос на удаление
              del_link.addEventListener("click", function(event) {
                console.log("Delete clicked: " + item.id);
                // Add your desired functionality here
              });

              action_Cell.appendChild(view_link);
              action_Cell.appendChild(del_link);


              row.appendChild(idCell);
              row.appendChild(emailCell);
              row.appendChild(url_detailCell);
              row.appendChild(action_Cell);

              tableBody.appendChild(row);
            });
          });
    </script>
{% endblock %}